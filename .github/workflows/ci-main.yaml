on: [push]
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Setup kubectl
        uses: azure/setup-kubectl@v1
        with:
          version: 'latest'
      - name: Deploy Kubernetes Manifests
        timeout-minutes: 10
        run: |     
          export KUBECONFIG=skaffold.yaml
          kubectl remove --validate=false --server-side=false -f kubernetes-manifests/
          kubectl apply --validate=false --server-side=false -f release/kubernetes-manifests/